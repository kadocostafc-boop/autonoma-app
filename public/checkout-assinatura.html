<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Assinatura — Autônoma</title>

  <link rel="stylesheet" href="/public.css.global.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<header>
  <div class="container header-content">
    <a href="/" class="logo">Autônoma</a>
  </div>
</header>

<section class="container">
  <h1>Escolha seu plano</h1>

  <div class="grid grid-3" style="margin-top:2rem">

    <!-- FREE -->
    <div class="card">
      <h2>Free</h2>
      <p class="price">R$ 0</p>
      <ul>
        <li>Perfil público</li>
        <li>WhatsApp direto</li>
        <li>Sem destaque</li>
      </ul>
      <button class="btn btn-outline" disabled>Plano Atual</button>
    </div>

    <!-- PRO -->
    <div class="card destaque">
      <h2>Pro</h2>
      <p class="price">R$ 49/mês</p>
      <ul>
        <li>Destaque local</li>
        <li>Prioridade nos cards</li>
        <li>Comissão: 6%</li>
      </ul>
      <button class="btn btn-primary" onclick="assinar('PRO')">Assinar Pro</button>
    </div>

    <!-- PREMIUM -->
    <div class="card premium">
      <h2>Premium</h2>
      <p class="price">R$ 89/mês</p>
      <ul>
        <li>Topo da busca</li>
        <li>Modo Raio</li>
        <li>Modo Uber</li>
        <li>Comissão: 4%</li>
      </ul>
      <button class="btn btn-primary" onclick="assinar('PREMIUM')">Assinar Premium</button>
    </div>

  </div>
</section>

<footer>
  © 2026 Autônoma.app
</footer>

<script>
  async function assinar(plano) {
    const res = await fetch('/api/pay/asaas/assinatura', {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ plano })
    })

    const data = await res.json()

    if (!data.ok) {
      alert(data.error || 'Erro ao criar assinatura')
      return
    }

    window.location.href = data.checkoutUrl
  }
</script>

</body>
</html>